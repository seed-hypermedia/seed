#!/usr/bin/env bun
// @bun
var Kb=Object.create;var{getPrototypeOf:Sb,defineProperty:M1,getOwnPropertyNames:Yb}=Object;var Qb=Object.prototype.hasOwnProperty;var h=(x,$,B)=>{B=x!=null?Kb(Sb(x)):{};let K=$||!x||!x.__esModule?M1(B,"default",{value:x,enumerable:!0}):B;for(let S of Yb(x))if(!Qb.call(K,S))M1(K,S,{get:()=>x[S],enumerable:!0});return K};var N1=(x,$)=>()=>($||x(($={exports:{}}).exports,$),$.exports);var e=N1((Nx,P1)=>{var s={to(x,$){if(!$)return`\x1B[${x+1}G`;return`\x1B[${$+1};${x+1}H`},move(x,$){let B="";if(x<0)B+=`\x1B[${-x}D`;else if(x>0)B+=`\x1B[${x}C`;if($<0)B+=`\x1B[${-$}A`;else if($>0)B+=`\x1B[${$}B`;return B},up:(x=1)=>`\x1B[${x}A`,down:(x=1)=>`\x1B[${x}B`,forward:(x=1)=>`\x1B[${x}C`,backward:(x=1)=>`\x1B[${x}D`,nextLine:(x=1)=>"\x1B[E".repeat(x),prevLine:(x=1)=>"\x1B[F".repeat(x),left:"\x1B[G",hide:"\x1B[?25l",show:"\x1B[?25h",save:"\x1B7",restore:"\x1B8"},Xb={up:(x=1)=>"\x1B[S".repeat(x),down:(x=1)=>"\x1B[T".repeat(x)},Jb={screen:"\x1B[2J",up:(x=1)=>"\x1B[1J".repeat(x),down:(x=1)=>"\x1B[J".repeat(x),line:"\x1B[2K",lineEnd:"\x1B[K",lineStart:"\x1B[1K",lines(x){let $="";for(let B=0;B<x;B++)$+=this.line+(B<x-1?s.up():"");if(x)$+=s.left;return $}};P1.exports={cursor:s,scroll:Xb,erase:Jb,beep:"\x07"}});var x1=N1((Px,b1)=>{var F=process||{},R1=F.argv||[],l=F.env||{},Zb=!(!!l.NO_COLOR||R1.includes("--no-color"))&&(!!l.FORCE_COLOR||R1.includes("--color")||F.platform==="win32"||(F.stdout||{}).isTTY&&l.TERM!=="dumb"||!!l.CI),qb=(x,$,B=x)=>(K)=>{let S=""+K,Y=S.indexOf($,x.length);return~Y?x+zb(S,$,B,Y)+$:x+S+$},zb=(x,$,B,K)=>{let S="",Y=0;do S+=x.substring(Y,K)+B,Y=K+$.length,K=x.indexOf($,Y);while(~K);return S+x.substring(Y)},T1=(x=Zb)=>{let $=x?qb:()=>String;return{isColorSupported:x,reset:$("\x1B[0m","\x1B[0m"),bold:$("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:$("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:$("\x1B[3m","\x1B[23m"),underline:$("\x1B[4m","\x1B[24m"),inverse:$("\x1B[7m","\x1B[27m"),hidden:$("\x1B[8m","\x1B[28m"),strikethrough:$("\x1B[9m","\x1B[29m"),black:$("\x1B[30m","\x1B[39m"),red:$("\x1B[31m","\x1B[39m"),green:$("\x1B[32m","\x1B[39m"),yellow:$("\x1B[33m","\x1B[39m"),blue:$("\x1B[34m","\x1B[39m"),magenta:$("\x1B[35m","\x1B[39m"),cyan:$("\x1B[36m","\x1B[39m"),white:$("\x1B[37m","\x1B[39m"),gray:$("\x1B[90m","\x1B[39m"),bgBlack:$("\x1B[40m","\x1B[49m"),bgRed:$("\x1B[41m","\x1B[49m"),bgGreen:$("\x1B[42m","\x1B[49m"),bgYellow:$("\x1B[43m","\x1B[49m"),bgBlue:$("\x1B[44m","\x1B[49m"),bgMagenta:$("\x1B[45m","\x1B[49m"),bgCyan:$("\x1B[46m","\x1B[49m"),bgWhite:$("\x1B[47m","\x1B[49m"),blackBright:$("\x1B[90m","\x1B[39m"),redBright:$("\x1B[91m","\x1B[39m"),greenBright:$("\x1B[92m","\x1B[39m"),yellowBright:$("\x1B[93m","\x1B[39m"),blueBright:$("\x1B[94m","\x1B[39m"),magentaBright:$("\x1B[95m","\x1B[39m"),cyanBright:$("\x1B[96m","\x1B[39m"),whiteBright:$("\x1B[97m","\x1B[39m"),bgBlackBright:$("\x1B[100m","\x1B[49m"),bgRedBright:$("\x1B[101m","\x1B[49m"),bgGreenBright:$("\x1B[102m","\x1B[49m"),bgYellowBright:$("\x1B[103m","\x1B[49m"),bgBlueBright:$("\x1B[104m","\x1B[49m"),bgMagentaBright:$("\x1B[105m","\x1B[49m"),bgCyanBright:$("\x1B[106m","\x1B[49m"),bgWhiteBright:$("\x1B[107m","\x1B[49m")}};b1.exports=T1();b1.exports.createColors=T1});import{stripVTControlCharacters as q1}from"util";var T=h(e(),1),f1=h(x1(),1);import{stdin as E1,stdout as w1}from"process";import*as j from"readline";import m1 from"readline";import{WriteStream as Wb}from"tty";function Gb({onlyFirst:x=!1}={}){let $=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp($,x?void 0:"g")}var Ib=Gb();function v1(x){if(typeof x!="string")throw TypeError(`Expected a \`string\`, got \`${typeof x}\``);return x.replace(Ib,"")}function d1(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var g1={exports:{}};(function(x){var $={};x.exports=$,$.eastAsianWidth=function(K){var S=K.charCodeAt(0),Y=K.length==2?K.charCodeAt(1):0,b=S;return 55296<=S&&S<=56319&&56320<=Y&&Y<=57343&&(S&=1023,Y&=1023,b=S<<10|Y,b+=65536),b==12288||65281<=b&&b<=65376||65504<=b&&b<=65510?"F":b==8361||65377<=b&&b<=65470||65474<=b&&b<=65479||65482<=b&&b<=65487||65490<=b&&b<=65495||65498<=b&&b<=65500||65512<=b&&b<=65518?"H":4352<=b&&b<=4447||4515<=b&&b<=4519||4602<=b&&b<=4607||9001<=b&&b<=9002||11904<=b&&b<=11929||11931<=b&&b<=12019||12032<=b&&b<=12245||12272<=b&&b<=12283||12289<=b&&b<=12350||12353<=b&&b<=12438||12441<=b&&b<=12543||12549<=b&&b<=12589||12593<=b&&b<=12686||12688<=b&&b<=12730||12736<=b&&b<=12771||12784<=b&&b<=12830||12832<=b&&b<=12871||12880<=b&&b<=13054||13056<=b&&b<=19903||19968<=b&&b<=42124||42128<=b&&b<=42182||43360<=b&&b<=43388||44032<=b&&b<=55203||55216<=b&&b<=55238||55243<=b&&b<=55291||63744<=b&&b<=64255||65040<=b&&b<=65049||65072<=b&&b<=65106||65108<=b&&b<=65126||65128<=b&&b<=65131||110592<=b&&b<=110593||127488<=b&&b<=127490||127504<=b&&b<=127546||127552<=b&&b<=127560||127568<=b&&b<=127569||131072<=b&&b<=194367||177984<=b&&b<=196605||196608<=b&&b<=262141?"W":32<=b&&b<=126||162<=b&&b<=163||165<=b&&b<=166||b==172||b==175||10214<=b&&b<=10221||10629<=b&&b<=10630?"Na":b==161||b==164||167<=b&&b<=168||b==170||173<=b&&b<=174||176<=b&&b<=180||182<=b&&b<=186||188<=b&&b<=191||b==198||b==208||215<=b&&b<=216||222<=b&&b<=225||b==230||232<=b&&b<=234||236<=b&&b<=237||b==240||242<=b&&b<=243||247<=b&&b<=250||b==252||b==254||b==257||b==273||b==275||b==283||294<=b&&b<=295||b==299||305<=b&&b<=307||b==312||319<=b&&b<=322||b==324||328<=b&&b<=331||b==333||338<=b&&b<=339||358<=b&&b<=359||b==363||b==462||b==464||b==466||b==468||b==470||b==472||b==474||b==476||b==593||b==609||b==708||b==711||713<=b&&b<=715||b==717||b==720||728<=b&&b<=731||b==733||b==735||768<=b&&b<=879||913<=b&&b<=929||931<=b&&b<=937||945<=b&&b<=961||963<=b&&b<=969||b==1025||1040<=b&&b<=1103||b==1105||b==8208||8211<=b&&b<=8214||8216<=b&&b<=8217||8220<=b&&b<=8221||8224<=b&&b<=8226||8228<=b&&b<=8231||b==8240||8242<=b&&b<=8243||b==8245||b==8251||b==8254||b==8308||b==8319||8321<=b&&b<=8324||b==8364||b==8451||b==8453||b==8457||b==8467||b==8470||8481<=b&&b<=8482||b==8486||b==8491||8531<=b&&b<=8532||8539<=b&&b<=8542||8544<=b&&b<=8555||8560<=b&&b<=8569||b==8585||8592<=b&&b<=8601||8632<=b&&b<=8633||b==8658||b==8660||b==8679||b==8704||8706<=b&&b<=8707||8711<=b&&b<=8712||b==8715||b==8719||b==8721||b==8725||b==8730||8733<=b&&b<=8736||b==8739||b==8741||8743<=b&&b<=8748||b==8750||8756<=b&&b<=8759||8764<=b&&b<=8765||b==8776||b==8780||b==8786||8800<=b&&b<=8801||8804<=b&&b<=8807||8810<=b&&b<=8811||8814<=b&&b<=8815||8834<=b&&b<=8835||8838<=b&&b<=8839||b==8853||b==8857||b==8869||b==8895||b==8978||9312<=b&&b<=9449||9451<=b&&b<=9547||9552<=b&&b<=9587||9600<=b&&b<=9615||9618<=b&&b<=9621||9632<=b&&b<=9633||9635<=b&&b<=9641||9650<=b&&b<=9651||9654<=b&&b<=9655||9660<=b&&b<=9661||9664<=b&&b<=9665||9670<=b&&b<=9672||b==9675||9678<=b&&b<=9681||9698<=b&&b<=9701||b==9711||9733<=b&&b<=9734||b==9737||9742<=b&&b<=9743||9748<=b&&b<=9749||b==9756||b==9758||b==9792||b==9794||9824<=b&&b<=9825||9827<=b&&b<=9829||9831<=b&&b<=9834||9836<=b&&b<=9837||b==9839||9886<=b&&b<=9887||9918<=b&&b<=9919||9924<=b&&b<=9933||9935<=b&&b<=9953||b==9955||9960<=b&&b<=9983||b==10045||b==10071||10102<=b&&b<=10111||11093<=b&&b<=11097||12872<=b&&b<=12879||57344<=b&&b<=63743||65024<=b&&b<=65039||b==65533||127232<=b&&b<=127242||127248<=b&&b<=127277||127280<=b&&b<=127337||127344<=b&&b<=127386||917760<=b&&b<=917999||983040<=b&&b<=1048573||1048576<=b&&b<=1114109?"A":"N"},$.characterLength=function(K){var S=this.eastAsianWidth(K);return S=="F"||S=="W"||S=="A"?2:1};function B(K){return K.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]|[^\uD800-\uDFFF]/g)||[]}$.length=function(K){for(var S=B(K),Y=0,b=0;b<S.length;b++)Y=Y+this.characterLength(S[b]);return Y},$.slice=function(K,S,Y){textLen=$.length(K),S=S||0,Y=Y||1,S<0&&(S=textLen+S),Y<0&&(Y=textLen+Y);for(var b="",X=0,J=B(K),Z=0;Z<J.length;Z++){var z=J[Z],q=$.length(z);if(X>=S-(q==2?1:0))if(X+q<=Y)b+=z;else break;X+=q}return b}})(g1);var Hb=g1.exports,Vb=d1(Hb),Ob=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|(?:\uD83E\uDDD1\uD83C\uDFFF\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC68(?:\uD83C\uDFFB(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|[\u2695\u2696\u2708]\uFE0F|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))?|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFF]))|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])\uFE0F|\u200D(?:(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D[\uDC66\uDC67])|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC)?|(?:\uD83D\uDC69(?:\uD83C\uDFFB\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|(?:\uD83C[\uDFFC-\uDFFF])\u200D\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83E\uDDD1(?:\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDE36\u200D\uD83C\uDF2B|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDE35\u200D\uD83D\uDCAB|\uD83D\uDE2E\u200D\uD83D\uDCA8|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83E\uDDD1(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\u2764\uFE0F\u200D(?:\uD83D\uDD25|\uD83E\uDE79)|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#\*0-9]\uFE0F\u20E3|\u2764\uFE0F|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE2E\uDE35\uDE36\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDD78\uDD7A-\uDDCB\uDDCD-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDD77\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g},Ab=d1(Ob);function v(x,$={}){if(typeof x!="string"||x.length===0||($={ambiguousIsNarrow:!0,...$},x=v1(x),x.length===0))return 0;x=x.replace(Ab(),"  ");let B=$.ambiguousIsNarrow?1:2,K=0;for(let S of x){let Y=S.codePointAt(0);if(Y<=31||Y>=127&&Y<=159||Y>=768&&Y<=879)continue;switch(Vb.eastAsianWidth(S)){case"F":case"W":K+=2;break;case"A":K+=B;break;default:K+=1}}return K}var $1=10,L1=(x=0)=>($)=>`\x1B[${$+x}m`,_1=(x=0)=>($)=>`\x1B[${38+x};5;${$}m`,U1=(x=0)=>($,B,K)=>`\x1B[${38+x};2;${$};${B};${K}m`,G={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],gray:[90,39],grey:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgGray:[100,49],bgGrey:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};Object.keys(G.modifier);var Mb=Object.keys(G.color),Nb=Object.keys(G.bgColor);[...Mb,...Nb];function Pb(){let x=new Map;for(let[$,B]of Object.entries(G)){for(let[K,S]of Object.entries(B))G[K]={open:`\x1B[${S[0]}m`,close:`\x1B[${S[1]}m`},B[K]=G[K],x.set(S[0],S[1]);Object.defineProperty(G,$,{value:B,enumerable:!1})}return Object.defineProperty(G,"codes",{value:x,enumerable:!1}),G.color.close="\x1B[39m",G.bgColor.close="\x1B[49m",G.color.ansi=L1(),G.color.ansi256=_1(),G.color.ansi16m=U1(),G.bgColor.ansi=L1($1),G.bgColor.ansi256=_1($1),G.bgColor.ansi16m=U1($1),Object.defineProperties(G,{rgbToAnsi256:{value:($,B,K)=>$===B&&B===K?$<8?16:$>248?231:Math.round(($-8)/247*24)+232:16+36*Math.round($/255*5)+6*Math.round(B/255*5)+Math.round(K/255*5),enumerable:!1},hexToRgb:{value:($)=>{let B=/[a-f\d]{6}|[a-f\d]{3}/i.exec($.toString(16));if(!B)return[0,0,0];let[K]=B;K.length===3&&(K=[...K].map((Y)=>Y+Y).join(""));let S=Number.parseInt(K,16);return[S>>16&255,S>>8&255,S&255]},enumerable:!1},hexToAnsi256:{value:($)=>G.rgbToAnsi256(...G.hexToRgb($)),enumerable:!1},ansi256ToAnsi:{value:($)=>{if($<8)return 30+$;if($<16)return 90+($-8);let B,K,S;if($>=232)B=(($-232)*10+8)/255,K=B,S=B;else{$-=16;let X=$%36;B=Math.floor($/36)/5,K=Math.floor(X/6)/5,S=X%6/5}let Y=Math.max(B,K,S)*2;if(Y===0)return 30;let b=30+(Math.round(S)<<2|Math.round(K)<<1|Math.round(B));return Y===2&&(b+=60),b},enumerable:!1},rgbToAnsi:{value:($,B,K)=>G.ansi256ToAnsi(G.rgbToAnsi256($,B,K)),enumerable:!1},hexToAnsi:{value:($)=>G.ansi256ToAnsi(G.hexToAnsi256($)),enumerable:!1}}),G}var Rb=Pb(),o=new Set(["\x1B","\x9B"]),Tb=39,S1="\x07",p1="[",mb="]",h1="m",Y1=`${mb}8;;`,C1=(x)=>`${o.values().next().value}${p1}${x}${h1}`,j1=(x)=>`${o.values().next().value}${Y1}${x}${S1}`,Lb=(x)=>x.split(" ").map(($)=>v($)),B1=(x,$,B)=>{let K=[...$],S=!1,Y=!1,b=v(v1(x[x.length-1]));for(let[X,J]of K.entries()){let Z=v(J);if(b+Z<=B?x[x.length-1]+=J:(x.push(J),b=0),o.has(J)&&(S=!0,Y=K.slice(X+1).join("").startsWith(Y1)),S){Y?J===S1&&(S=!1,Y=!1):J===h1&&(S=!1);continue}b+=Z,b===B&&X<K.length-1&&(x.push(""),b=0)}!b&&x[x.length-1].length>0&&x.length>1&&(x[x.length-2]+=x.pop())},_b=(x)=>{let $=x.split(" "),B=$.length;for(;B>0&&!(v($[B-1])>0);)B--;return B===$.length?x:$.slice(0,B).join(" ")+$.slice(B).join("")},Ub=(x,$,B={})=>{if(B.trim!==!1&&x.trim()==="")return"";let K="",S,Y,b=Lb(x),X=[""];for(let[Z,z]of x.split(" ").entries()){B.trim!==!1&&(X[X.length-1]=X[X.length-1].trimStart());let q=v(X[X.length-1]);if(Z!==0&&(q>=$&&(B.wordWrap===!1||B.trim===!1)&&(X.push(""),q=0),(q>0||B.trim===!1)&&(X[X.length-1]+=" ",q++)),B.hard&&b[Z]>$){let H=$-q,N=1+Math.floor((b[Z]-H-1)/$);Math.floor((b[Z]-1)/$)<N&&X.push(""),B1(X,z,$);continue}if(q+b[Z]>$&&q>0&&b[Z]>0){if(B.wordWrap===!1&&q<$){B1(X,z,$);continue}X.push("")}if(q+b[Z]>$&&B.wordWrap===!1){B1(X,z,$);continue}X[X.length-1]+=z}B.trim!==!1&&(X=X.map((Z)=>_b(Z)));let J=[...X.join(`
`)];for(let[Z,z]of J.entries()){if(K+=z,o.has(z)){let{groups:H}=new RegExp(`(?:\\${p1}(?<code>\\d+)m|\\${Y1}(?<uri>.*)${S1})`).exec(J.slice(Z).join(""))||{groups:{}};if(H.code!==void 0){let N=Number.parseFloat(H.code);S=N===Tb?void 0:N}else H.uri!==void 0&&(Y=H.uri.length===0?void 0:H.uri)}let q=Rb.codes.get(Number(S));J[Z+1]===`
`?(Y&&(K+=j1("")),S&&q&&(K+=C1(q))):z===`
`&&(S&&q&&(K+=C1(S)),Y&&(K+=j1(Y)))}return K};function k1(x,$,B){return String(x).normalize().replace(/\r\n/g,`
`).split(`
`).map((K)=>Ub(K,$,B)).join(`
`)}var Cb=["up","down","left","right","space","enter","cancel"],r={actions:new Set(Cb),aliases:new Map([["k","up"],["j","down"],["h","left"],["l","right"],["\x03","cancel"],["escape","cancel"]])};function Q1(x,$){if(typeof x=="string")return r.aliases.get(x)===$;for(let B of x)if(B!==void 0&&Q1(B,$))return!0;return!1}function jb(x,$){if(x===$)return;let B=x.split(`
`),K=$.split(`
`),S=[];for(let Y=0;Y<Math.max(B.length,K.length);Y++)B[Y]!==K[Y]&&S.push(Y);return S}var kb=globalThis.process.platform.startsWith("win"),K1=Symbol("clack:cancel");function y(x){return x===K1}function c(x,$){let B=x;B.isTTY&&B.setRawMode($)}function l1({input:x=E1,output:$=w1,overwrite:B=!0,hideCursor:K=!0}={}){let S=j.createInterface({input:x,output:$,prompt:"",tabSize:1});j.emitKeypressEvents(x,S),x.isTTY&&x.setRawMode(!0);let Y=(b,{name:X,sequence:J})=>{let Z=String(b);if(Q1([Z,X,J],"cancel")){K&&$.write(T.cursor.show),process.exit(0);return}if(!B)return;j.moveCursor($,X==="return"?0:-1,X==="return"?-1:0,()=>{j.clearLine($,1,()=>{x.once("keypress",Y)})})};return K&&$.write(T.cursor.hide),x.once("keypress",Y),()=>{x.off("keypress",Y),K&&$.write(T.cursor.show),x.isTTY&&!kb&&x.setRawMode(!1),S.terminal=!1,S.close()}}var yb=Object.defineProperty,Eb=(x,$,B)=>($ in x)?yb(x,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):x[$]=B,_=(x,$,B)=>(Eb(x,typeof $!="symbol"?$+"":$,B),B);class a{constructor(x,$=!0){_(this,"input"),_(this,"output"),_(this,"_abortSignal"),_(this,"rl"),_(this,"opts"),_(this,"_render"),_(this,"_track",!1),_(this,"_prevFrame",""),_(this,"_subscribers",new Map),_(this,"_cursor",0),_(this,"state","initial"),_(this,"error",""),_(this,"value");let{input:B=E1,output:K=w1,render:S,signal:Y,...b}=x;this.opts=b,this.onKeypress=this.onKeypress.bind(this),this.close=this.close.bind(this),this.render=this.render.bind(this),this._render=S.bind(this),this._track=$,this._abortSignal=Y,this.input=B,this.output=K}unsubscribe(){this._subscribers.clear()}setSubscriber(x,$){let B=this._subscribers.get(x)??[];B.push($),this._subscribers.set(x,B)}on(x,$){this.setSubscriber(x,{cb:$})}once(x,$){this.setSubscriber(x,{cb:$,once:!0})}emit(x,...$){let B=this._subscribers.get(x)??[],K=[];for(let S of B)S.cb(...$),S.once&&K.push(()=>B.splice(B.indexOf(S),1));for(let S of K)S()}prompt(){return new Promise((x,$)=>{if(this._abortSignal){if(this._abortSignal.aborted)return this.state="cancel",this.close(),x(K1);this._abortSignal.addEventListener("abort",()=>{this.state="cancel",this.close()},{once:!0})}let B=new Wb(0);B._write=(K,S,Y)=>{this._track&&(this.value=this.rl?.line.replace(/\t/g,""),this._cursor=this.rl?.cursor??0,this.emit("value",this.value)),Y()},this.input.pipe(B),this.rl=m1.createInterface({input:this.input,output:B,tabSize:2,prompt:"",escapeCodeTimeout:50}),m1.emitKeypressEvents(this.input,this.rl),this.rl.prompt(),this.opts.initialValue!==void 0&&this._track&&this.rl.write(this.opts.initialValue),this.input.on("keypress",this.onKeypress),c(this.input,!0),this.output.on("resize",this.render),this.render(),this.once("submit",()=>{this.output.write(T.cursor.show),this.output.off("resize",this.render),c(this.input,!1),x(this.value)}),this.once("cancel",()=>{this.output.write(T.cursor.show),this.output.off("resize",this.render),c(this.input,!1),x(K1)})})}onKeypress(x,$){if(this.state==="error"&&(this.state="active"),$?.name&&(!this._track&&r.aliases.has($.name)&&this.emit("cursor",r.aliases.get($.name)),r.actions.has($.name)&&this.emit("cursor",$.name)),x&&(x.toLowerCase()==="y"||x.toLowerCase()==="n")&&this.emit("confirm",x.toLowerCase()==="y"),x==="\t"&&this.opts.placeholder&&(this.value||(this.rl?.write(this.opts.placeholder),this.emit("value",this.opts.placeholder))),x&&this.emit("key",x.toLowerCase()),$?.name==="return"){if(this.opts.validate){let B=this.opts.validate(this.value);B&&(this.error=B instanceof Error?B.message:B,this.state="error",this.rl?.write(this.value))}this.state!=="error"&&(this.state="submit")}Q1([x,$?.name,$?.sequence],"cancel")&&(this.state="cancel"),(this.state==="submit"||this.state==="cancel")&&this.emit("finalize"),this.render(),(this.state==="submit"||this.state==="cancel")&&this.close()}close(){this.input.unpipe(),this.input.removeListener("keypress",this.onKeypress),this.output.write(`
`),c(this.input,!1),this.rl?.close(),this.rl=void 0,this.emit(`${this.state}`,this.value),this.unsubscribe()}restoreCursor(){let x=k1(this._prevFrame,process.stdout.columns,{hard:!0}).split(`
`).length-1;this.output.write(T.cursor.move(-999,x*-1))}render(){let x=k1(this._render(this)??"",process.stdout.columns,{hard:!0});if(x!==this._prevFrame){if(this.state==="initial")this.output.write(T.cursor.hide);else{let $=jb(this._prevFrame,x);if(this.restoreCursor(),$&&$?.length===1){let B=$[0];this.output.write(T.cursor.move(0,B)),this.output.write(T.erase.lines(1));let K=x.split(`
`);this.output.write(K[B]),this._prevFrame=x,this.output.write(T.cursor.move(0,K.length-B-1));return}if($&&$?.length>1){let B=$[0];this.output.write(T.cursor.move(0,B)),this.output.write(T.erase.down());let K=x.split(`
`).slice(B);this.output.write(K.join(`
`)),this._prevFrame=x;return}this.output.write(T.erase.down())}this.output.write(x),this.state==="initial"&&(this.state="active"),this._prevFrame=x}}}class X1 extends a{get cursor(){return this.value?0:1}get _value(){return this.cursor===0}constructor(x){super(x,!1),this.value=!!x.initialValue,this.on("value",()=>{this.value=this._value}),this.on("confirm",($)=>{this.output.write(T.cursor.move(0,-1)),this.value=$,this.state="submit",this.close()}),this.on("cursor",()=>{this.value=!this.value})}}var wb=Object.defineProperty,fb=(x,$,B)=>($ in x)?wb(x,$,{enumerable:!0,configurable:!0,writable:!0,value:B}):x[$]=B,y1=(x,$,B)=>(fb(x,typeof $!="symbol"?$+"":$,B),B);class J1 extends a{constructor(x){super(x,!1),y1(this,"options"),y1(this,"cursor",0),this.options=x.options,this.cursor=this.options.findIndex(({value:$})=>$===x.initialValue),this.cursor===-1&&(this.cursor=0),this.changeValue(),this.on("cursor",($)=>{switch($){case"left":case"up":this.cursor=this.cursor===0?this.options.length-1:this.cursor-1;break;case"down":case"right":this.cursor=this.cursor===this.options.length-1?0:this.cursor+1;break}this.changeValue()})}get _value(){return this.options[this.cursor]}changeValue(){this.value=this._value.value}}class Z1 extends a{get valueWithCursor(){if(this.state==="submit")return this.value;if(this.cursor>=this.value.length)return`${this.value}\u2588`;let x=this.value.slice(0,this.cursor),[$,...B]=this.value.slice(this.cursor);return`${x}${f1.default.inverse($)}${B.join("")}`}get cursor(){return this._cursor}constructor(x){super(x),this.on("finalize",()=>{this.value||(this.value=x.defaultValue)})}}var Q=h(x1(),1),n=h(e(),1);import C from"process";function vb(){return C.platform!=="win32"?C.env.TERM!=="linux":!!C.env.CI||!!C.env.WT_SESSION||!!C.env.TERMINUS_SUBLIME||C.env.ConEmuTask==="{cmd::Cmder}"||C.env.TERM_PROGRAM==="Terminus-Sublime"||C.env.TERM_PROGRAM==="vscode"||C.env.TERM==="xterm-256color"||C.env.TERM==="alacritty"||C.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}var z1=vb(),I=(x,$)=>z1?x:$,db=I("\u25C6","*"),c1=I("\u25A0","x"),r1=I("\u25B2","x"),u=I("\u25C7","o"),gb=I("\u250C","T"),W=I("\u2502","|"),w=I("\u2514","\u2014"),W1=I("\u25CF",">"),G1=I("\u25CB"," "),fx=I("\u25FB","[\u2022]"),vx=I("\u25FC","[+]"),dx=I("\u25FB","[ ]"),gx=I("\u25AA","\u2022"),F1=I("\u2500","-"),pb=I("\u256E","+"),hb=I("\u251C","+"),lb=I("\u256F","+"),Fb=I("\u25CF","\u2022"),cb=I("\u25C6","*"),rb=I("\u25B2","!"),ob=I("\u25A0","x"),I1=(x)=>{switch(x){case"initial":case"active":return Q.default.cyan(db);case"cancel":return Q.default.red(c1);case"error":return Q.default.yellow(r1);case"submit":return Q.default.green(u)}},ab=(x)=>{let{cursor:$,options:B,style:K}=x,S=x.maxItems??Number.POSITIVE_INFINITY,Y=Math.max(process.stdout.rows-4,0),b=Math.min(Y,Math.max(S,5)),X=0;$>=X+b-3?X=Math.max(Math.min($-b+3,B.length-b),0):$<X+2&&(X=Math.max($-2,0));let J=b<B.length&&X>0,Z=b<B.length&&X+b<B.length;return B.slice(X,X+b).map((z,q,H)=>{let N=q===0&&J,V=q===H.length-1&&Z;return N||V?Q.default.dim("..."):K(z,q+X===$)})},d=(x)=>new Z1({validate:x.validate,placeholder:x.placeholder,defaultValue:x.defaultValue,initialValue:x.initialValue,render(){let $=`${Q.default.gray(W)}
${I1(this.state)}  ${x.message}
`,B=x.placeholder?Q.default.inverse(x.placeholder[0])+Q.default.dim(x.placeholder.slice(1)):Q.default.inverse(Q.default.hidden("_")),K=this.value?this.valueWithCursor:B;switch(this.state){case"error":return`${$.trim()}
${Q.default.yellow(W)}  ${K}
${Q.default.yellow(w)}  ${Q.default.yellow(this.error)}
`;case"submit":return`${$}${Q.default.gray(W)}  ${Q.default.dim(this.value||x.placeholder)}`;case"cancel":return`${$}${Q.default.gray(W)}  ${Q.default.strikethrough(Q.default.dim(this.value??""))}${this.value?.trim()?`
${Q.default.gray(W)}`:""}`;default:return`${$}${Q.default.cyan(W)}  ${K}
${Q.default.cyan(w)}
`}}}).prompt();var k=(x)=>{let $=x.active??"Yes",B=x.inactive??"No";return new X1({active:$,inactive:B,initialValue:x.initialValue??!0,render(){let K=`${Q.default.gray(W)}
${I1(this.state)}  ${x.message}
`,S=this.value?$:B;switch(this.state){case"submit":return`${K}${Q.default.gray(W)}  ${Q.default.dim(S)}`;case"cancel":return`${K}${Q.default.gray(W)}  ${Q.default.strikethrough(Q.default.dim(S))}
${Q.default.gray(W)}`;default:return`${K}${Q.default.cyan(W)}  ${this.value?`${Q.default.green(W1)} ${$}`:`${Q.default.dim(G1)} ${Q.default.dim($)}`} ${Q.default.dim("/")} ${this.value?`${Q.default.dim(G1)} ${Q.default.dim(B)}`:`${Q.default.green(W1)} ${B}`}
${Q.default.cyan(w)}
`}}}).prompt()},g=(x)=>{let $=(B,K)=>{let S=B.label??String(B.value);switch(K){case"selected":return`${Q.default.dim(S)}`;case"active":return`${Q.default.green(W1)} ${S} ${B.hint?Q.default.dim(`(${B.hint})`):""}`;case"cancelled":return`${Q.default.strikethrough(Q.default.dim(S))}`;default:return`${Q.default.dim(G1)} ${Q.default.dim(S)}`}};return new J1({options:x.options,initialValue:x.initialValue,render(){let B=`${Q.default.gray(W)}
${I1(this.state)}  ${x.message}
`;switch(this.state){case"submit":return`${B}${Q.default.gray(W)}  ${$(this.options[this.cursor],"selected")}`;case"cancel":return`${B}${Q.default.gray(W)}  ${$(this.options[this.cursor],"cancelled")}
${Q.default.gray(W)}`;default:return`${B}${Q.default.cyan(W)}  ${ab({cursor:this.cursor,options:this.options,maxItems:x.maxItems,style:(K,S)=>$(K,S?"active":"inactive")}).join(`
${Q.default.cyan(W)}  `)}
${Q.default.cyan(w)}
`}}}).prompt()};var f=(x="",$="")=>{let B=`
${x}
`.split(`
`),K=q1($).length,S=Math.max(B.reduce((b,X)=>{let J=q1(X);return J.length>b?J.length:b},0),K)+2,Y=B.map((b)=>`${Q.default.gray(W)}  ${Q.default.dim(b)}${" ".repeat(S-q1(b).length)}${Q.default.gray(W)}`).join(`
`);process.stdout.write(`${Q.default.gray(W)}
${Q.default.green(u)}  ${Q.default.reset($)} ${Q.default.gray(F1.repeat(Math.max(S-K-1,1))+pb)}
${Y}
${Q.default.gray(hb+F1.repeat(S+2)+lb)}
`)},p=(x="")=>{process.stdout.write(`${Q.default.gray(w)}  ${Q.default.red(x)}

`)},H1=(x="")=>{process.stdout.write(`${Q.default.gray(gb)}  ${x}
`)},o1=(x="")=>{process.stdout.write(`${Q.default.gray(W)}
${Q.default.gray(w)}  ${x}

`)},m={message:(x="",{symbol:$=Q.default.gray(W)}={})=>{let B=[`${Q.default.gray(W)}`];if(x){let[K,...S]=x.split(`
`);B.push(`${$}  ${K}`,...S.map((Y)=>`${Q.default.gray(W)}  ${Y}`))}process.stdout.write(`${B.join(`
`)}
`)},info:(x)=>{m.message(x,{symbol:Q.default.blue(Fb)})},success:(x)=>{m.message(x,{symbol:Q.default.green(cb)})},step:(x)=>{m.message(x,{symbol:Q.default.green(u)})},warn:(x)=>{m.message(x,{symbol:Q.default.yellow(rb)})},warning:(x)=>{m.warn(x)},error:(x)=>{m.message(x,{symbol:Q.default.red(ob)})}},a1=()=>{let x=z1?["\u25D2","\u25D0","\u25D3","\u25D1"]:["\u2022","o","O","0"],$=z1?80:120,B=process.env.CI==="true",K,S,Y=!1,b="",X,J=(P)=>{let R=P>1?"Something went wrong":"Canceled";Y&&M(R,P)},Z=()=>J(2),z=()=>J(1),q=()=>{process.on("uncaughtExceptionMonitor",Z),process.on("unhandledRejection",Z),process.on("SIGINT",z),process.on("SIGTERM",z),process.on("exit",J)},H=()=>{process.removeListener("uncaughtExceptionMonitor",Z),process.removeListener("unhandledRejection",Z),process.removeListener("SIGINT",z),process.removeListener("SIGTERM",z),process.removeListener("exit",J)},N=()=>{if(X===void 0)return;B&&process.stdout.write(`
`);let P=X.split(`
`);process.stdout.write(n.cursor.move(-999,P.length-1)),process.stdout.write(n.erase.down(P.length))},V=(P)=>P.replace(/\.+$/,""),U=(P="")=>{Y=!0,K=l1(),b=V(P),process.stdout.write(`${Q.default.gray(W)}
`);let R=0,O=0;q(),S=setInterval(()=>{if(B&&b===X)return;N(),X=b;let E=Q.default.magenta(x[R]),Bb=B?"...":".".repeat(Math.floor(O)).slice(0,3);process.stdout.write(`${E}  ${b}${Bb}`),R=R+1<x.length?R+1:0,O=O<x.length?O+0.125:0},$)},M=(P="",R=0)=>{Y=!1,clearInterval(S),N();let O=R===0?Q.default.green(u):R===1?Q.default.red(c1):Q.default.red(r1);b=V(P??b),process.stdout.write(`${O}  ${b}
`),H(),K()};return{start:U,stop:M,message:(P="")=>{b=V(P??b)}}},V1=async(x,$)=>{let B={},K=Object.keys(x);for(let S of K){let Y=x[S],b=await Y({results:B})?.catch((X)=>{throw X});if(typeof $?.onCancel=="function"&&y(b)){B[S]="canceled",$.onCancel({results:B});continue}B[S]=b}return B};import{readFile as t1,writeFile as i,mkdir as O1,access as D}from"fs/promises";import{execSync as D1,exec as ub}from"child_process";import{createHash as ib,randomBytes as tb}from"crypto";import{homedir as Db}from"os";import{join as A}from"path";var A1="0.1.0",sb=process.env.SEED_DIR||"/opt/seed",eb="https://raw.githubusercontent.com/seed-hypermedia/seed/main",s1=`${process.env.SEED_REPO_URL||eb}/ops/docker-compose.yml`,bx="https://notify.seed.hyper.media",xx="https://ln.seed.hyper.media",$x="https://ln.testnet.seed.hyper.media";function Bx(x=sb){return{seedDir:x,configPath:A(x,"config.json"),composePath:A(x,"docker-compose.yml"),deployLog:A(x,"deploy.log")}}function Kx(){return{run(x){return D1(x,{encoding:"utf-8",timeout:30000}).trim()},runSafe(x){try{return this.run(x)}catch{return null}},exec(x){return new Promise(($,B)=>{ub(x,{timeout:120000},(K,S,Y)=>{if(K)B(K);else $({stdout:S.toString().trim(),stderr:Y.toString().trim()})})})}}}function e1(x){switch(x){case"dev":return{testnet:!0,release_channel:"dev"};case"staging":return{testnet:!1,release_channel:"dev"};case"prod":default:return{testnet:!1,release_channel:"latest"}}}async function Sx(x){try{return await D(x.configPath),!0}catch{return!1}}async function Yx(x){let $=await t1(x.configPath,"utf-8");return JSON.parse($)}async function t(x,$){await O1($.seedDir,{recursive:!0}),await i($.configPath,JSON.stringify(x,null,2)+`
`,"utf-8")}function bb(x=10){let B=tb(x);return Array.from(B).map((K)=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"[K%62]).join("")}function L(x){let $=new Date().toISOString();if(!process.stdout.isTTY)console.log(`[${$}] ${x}`)}function Qx(x){let $=null,B=!1;try{let K=JSON.parse(x);for(let S of K){if(S.startsWith("SEED_LOG_LEVEL="))$=S.split("=")[1];if(S.startsWith("SEED_P2P_TESTNET_NAME=")&&S.split("=")[1])B=!0}}catch{}return{logLevel:$,testnet:B}}function Xx(x){let $=null,B=!1,K=!1;try{let S=JSON.parse(x);for(let Y of S){if(Y.startsWith("SEED_BASE_URL="))$=Y.split("=")[1];if(Y.startsWith("SEED_IS_GATEWAY=true"))B=!0;if(Y.startsWith("SEED_ENABLE_STATISTICS=true"))K=!0}}catch{}return{hostname:$,gateway:B,trafficStats:K}}function Jx(x){let $=x.split(":");return $.length>1?$[$.length-1]:"latest"}async function Zx(x){let $=Db(),B=[A($,".seed-site"),"/shm/gateway","/shm"],K=null;for(let M of B)try{await D(M),K=M;break}catch{}let S=x.runSafe("docker ps --format '{{.Names}}' 2>/dev/null | grep -q seed");if(!K&&S===null)return null;if(!K)K=A($,".seed-site");let Y=null,b=[A(K,"web","config.json"),"/shm/gateway/web/config.json",A($,".seed-site","web","config.json")];for(let M of b)try{let P=await t1(M,"utf-8"),R=JSON.parse(P);if(R.availableRegistrationSecret){Y=R.availableRegistrationSecret;break}}catch{}let X=null,J=null,Z=null,z=!1,q=!1,H=!1,N=x.runSafe("docker inspect seed-daemon --format '{{json .Config.Env}}' 2>/dev/null");if(N){let M=Qx(N);J=M.logLevel,z=M.testnet}let V=x.runSafe("docker inspect seed-web --format '{{json .Config.Env}}' 2>/dev/null");if(V){let M=Xx(V);X=M.hostname,q=M.gateway,H=M.trafficStats}let U=x.runSafe("docker inspect seed-web --format '{{.Config.Image}}' 2>/dev/null");if(U)Z=Jx(U);return{workspace:K,secret:Y,hostname:X,logLevel:J,imageTag:Z,testnet:z,gateway:q,trafficStats:H}}async function qx(x,$,B){H1(`Seed Node Migration v${A1}`),f([`Detected an existing Seed installation at: ${x.workspace}`,"","We'll import your current settings and migrate to the new deployment system.",`After migration, your node will be managed from ${$.seedDir}/ and updated via cron.`,"","Please review and confirm the detected values below."].join(`
`),"Existing installation found");let K=await V1({domain:()=>d({message:"Public hostname (including https://)",placeholder:"https://node1.seed.run",initialValue:x.hostname??"",validate:(V)=>{if(!V)return"Required";if(!V.startsWith("https://")&&!V.startsWith("http://"))return"Must start with https:// or http://"}}),email:()=>d({message:"Contact email \u2014 lets us notify you about security updates and node issues. Not shared publicly.",placeholder:"you@example.com",validate:(V)=>{if(!V)return"Required";if(!V.includes("@"))return"Must be a valid email"}}),environment:()=>g({message:"Environment",initialValue:x.testnet?"dev":"prod",options:[{value:"prod",label:"Production",hint:"stable releases, mainnet network \u2014 recommended"},{value:"staging",label:"Staging",hint:"development builds, mainnet network \u2014 for testing"},{value:"dev",label:"Development",hint:"development builds, testnet network"}]}),log_level:()=>g({message:"Log level",initialValue:x.logLevel??"info",options:[{value:"debug",label:"Debug",hint:"verbose, useful for troubleshooting"},{value:"info",label:"Info",hint:"standard operational logging"},{value:"warn",label:"Warn",hint:"only warnings and errors"},{value:"error",label:"Error",hint:"only errors"}]}),gateway:()=>k({message:"Run as public gateway?",initialValue:x.gateway}),analytics:()=>k({message:"Enable web analytics? Adds a Plausible.io dashboard to track your site's traffic.",initialValue:x.trafficStats})},{onCancel:()=>{p("Migration cancelled"),process.exit(0)}}),S=x.secret??bb();if(x.secret)m.success("Registration secret imported from existing installation.");else m.warn("No existing registration secret found. Generated a new one.");let Y=K.environment,b=e1(Y),X={domain:K.domain,email:K.email,compose_url:s1,compose_sha:"",compose_envs:{LOG_LEVEL:K.log_level},environment:Y,release_channel:b.release_channel,testnet:b.testnet,link_secret:S,analytics:K.analytics,gateway:K.gateway,last_script_run:""},J=Object.entries(X).map(([V,U])=>`  ${V}: ${typeof U==="object"?JSON.stringify(U):U}`).join(`
`);f(J,"Configuration summary");let Z=await k({message:"Write config and proceed with deployment?"});if(y(Z)||!Z)p("Migration cancelled"),process.exit(0);await t(X,$),m.success(`Config written to ${$.configPath}`);let z=A(x.workspace,"web"),q=String(process.getuid()),H=String(process.getgid()),N=B.runSafe(`stat -c '%u:%g' "${z}" 2>/dev/null`);if(N&&N!==`${q}:${H}`){if(m.warn(`The web data directory (${z}) is owned by a different user (${N}). Updating ownership so the web container can write to it.`),!B.runSafe(`chown -R ${q}:${H} "${z}" 2>/dev/null`))B.runSafe(`sudo chown -R ${q}:${H} "${z}"`);m.success("File ownership updated.")}return X}async function zx(x){H1(`Seed Node Setup v${A1}`),f(["Welcome! This wizard will configure your new Seed node.","","Seed is a peer-to-peer hypermedia publishing system. This script sets up","the Docker containers, reverse proxy, and networking so your node is","reachable on the public internet.","",`Configuration will be saved to ${x.configPath}.`,"Subsequent runs of this script will deploy automatically (headless mode)."].join(`
`),"First-time setup");let $=await V1({domain:()=>d({message:"Public hostname (including https://)",placeholder:"https://node1.seed.run",validate:(J)=>{if(!J)return"Required";if(!J.startsWith("https://")&&!J.startsWith("http://"))return"Must start with https:// or http://"}}),email:()=>d({message:"Contact email \u2014 lets us notify you about security updates and node issues. Not shared publicly.",placeholder:"you@example.com",validate:(J)=>{if(!J)return"Required";if(!J.includes("@"))return"Must be a valid email"}}),environment:()=>g({message:"Environment",initialValue:"prod",options:[{value:"prod",label:"Production",hint:"stable releases, mainnet network \u2014 recommended"},{value:"staging",label:"Staging",hint:"development builds, mainnet network \u2014 for testing"},{value:"dev",label:"Development",hint:"development builds, testnet network"}]}),log_level:()=>g({message:"Log level for Seed services",initialValue:"info",options:[{value:"debug",label:"Debug",hint:"very verbose, useful for troubleshooting"},{value:"info",label:"Info",hint:"standard operational logging \u2014 recommended"},{value:"warn",label:"Warn",hint:"only warnings and errors"},{value:"error",label:"Error",hint:"only critical errors"}]}),gateway:()=>k({message:"Run as a public gateway? (serves all known public content)",initialValue:!1}),analytics:()=>k({message:"Enable web analytics? Adds a Plausible.io dashboard to track your site's traffic.",initialValue:!1})},{onCancel:()=>{p("Setup cancelled"),process.exit(0)}}),B=bb(),K=$.environment,S=e1(K),Y={domain:$.domain,email:$.email,compose_url:s1,compose_sha:"",compose_envs:{LOG_LEVEL:$.log_level},environment:K,release_channel:S.release_channel,testnet:S.testnet,link_secret:B,analytics:$.analytics,gateway:$.gateway,last_script_run:""},b=Object.entries(Y).filter(([J])=>J!=="compose_sha"&&J!=="last_script_run").map(([J,Z])=>`  ${J}: ${typeof Z==="object"?JSON.stringify(Z):Z}`).join(`
`);f(b,"Configuration summary");let X=await k({message:"Write config and proceed with deployment?"});if(y(X)||!X)p("Setup cancelled"),process.exit(0);return await t(Y,x),m.success(`Config written to ${x.configPath}`),Y}function Wx(x){return x.replace(/^https?:\/\//,"").replace(/\/+$/,"")}function Gx(x){return`{$SEED_SITE_HOSTNAME}

encode zstd gzip

@ipfsget {
	method GET HEAD OPTIONS
	path /ipfs/*
}

reverse_proxy /.metrics* grafana:{$SEED_SITE_MONITORING_PORT:3001}

reverse_proxy @ipfsget seed-daemon:{$HM_SITE_BACKEND_GRPCWEB_PORT:56001}

reverse_proxy * seed-web:{$SEED_SITE_LOCAL_PORT:3000}
`}function Ix(x){return ib("sha256").update(x).digest("hex")}async function n1(x){let $=["seed-proxy","seed-web","seed-daemon"];for(let B of $)if(x.runSafe(`docker inspect ${B} --format '{{.State.Running}}' 2>/dev/null`)!=="true")return!1;return!0}async function Hx(x){let $=new Map,B=["seed-proxy","seed-web","seed-daemon"];for(let K of B){let S=x.runSafe(`docker inspect ${K} --format '{{.Image}}' 2>/dev/null`);if(S)$.set(K,S)}return $}function xb(x,$){let B=Wx(x.domain),K=x.testnet?"dev":"",S=x.testnet?$x:xx,Y={SEED_SITE_HOSTNAME:x.domain,SEED_SITE_DNS:B,SEED_SITE_TAG:x.release_channel,SEED_SITE_WORKSPACE:$.seedDir,SEED_UID:String(process.getuid()),SEED_GID:String(process.getgid()),SEED_LOG_LEVEL:x.compose_envs.LOG_LEVEL,SEED_IS_GATEWAY:String(x.gateway),SEED_ENABLE_STATISTICS:String(x.analytics),SEED_P2P_TESTNET_NAME:K,SEED_LIGHTNING_URL:S,NOTIFY_SERVICE_HOST:bx,SEED_SITE_MONITORING_WORKDIR:A($.seedDir,"monitoring")};return Object.entries(Y).map(([b,X])=>`${b}="${X}"`).join(" ")}function Vx(x){return[A(x.seedDir,"proxy"),A(x.seedDir,"proxy","data"),A(x.seedDir,"proxy","config"),A(x.seedDir,"web"),A(x.seedDir,"daemon"),A(x.seedDir,"monitoring"),A(x.seedDir,"monitoring","grafana"),A(x.seedDir,"monitoring","prometheus")]}async function $b(x,$){try{await D(x.seedDir)}catch{try{await O1(x.seedDir,{recursive:!0})}catch{L(`Creating ${x.seedDir} requires elevated permissions`),$.run(`sudo mkdir -p "${x.seedDir}"`),$.run(`sudo chown "$(id -u):$(id -g)" "${x.seedDir}"`)}}}async function u1(x,$,B,K){L("Deployment failed \u2014 rolling back to previous images...");for(let[Y,b]of x)L(`  Restoring ${Y} to image ${b.slice(0,16)}...`),K.runSafe(`docker stop ${Y} 2>/dev/null`),K.runSafe(`docker rm ${Y} 2>/dev/null`);L("  Running docker compose up with cached images...");let S=xb($,B);K.runSafe(`${S} docker compose -f ${B.composePath} up -d --quiet-pull 2>&1`),L("Rollback complete. Check container status with: docker ps")}async function i1(x,$,B){let K=process.stdout.isTTY,S=K?a1():null,Y=(O)=>{if(S)S.message(O);L(O)};if(K)m.step("Starting deployment...");S?.start("Fetching docker-compose.yml..."),Y("Fetching docker-compose.yml...");let b=process.env.SEED_REPO_URL,X=b?`${b}/ops/docker-compose.yml`:x.compose_url,J=await fetch(X);if(!J.ok)throw S?.stop("Failed to fetch docker-compose.yml"),Error(`Failed to fetch compose file from ${X}: ${J.status}`);let Z=await J.text(),z=Ix(Z),q=await n1(B);if(x.compose_sha===z&&q){S?.stop("No changes detected \u2014 all containers healthy. Skipping redeployment."),L("No changes detected \u2014 compose SHA matches and containers are healthy. Skipping."),x.last_script_run=new Date().toISOString(),await t(x,$);return}if(x.compose_sha&&x.compose_sha!==z)Y(`Compose file changed: ${x.compose_sha.slice(0,8)} -> ${z.slice(0,8)}`);await $b($,B),await i($.composePath,Z,"utf-8"),Y("Setting up workspace directories...");let H=Vx($);for(let O of H)await O1(O,{recursive:!0});Y("Generating Caddyfile...");let N=Gx(x);await i(A($.seedDir,"proxy","CaddyFile"),N,"utf-8");let V=A($.seedDir,"web","config.json"),U=!1;try{await D(V)}catch{U=!0,await i(V,JSON.stringify({availableRegistrationSecret:x.link_secret})+`
`,"utf-8"),Y("Created initial web/config.json with registration secret.")}Y("Stopping any existing containers..."),B.runSafe("docker stop seed-site seed-daemon seed-proxy grafana prometheus 2>/dev/null"),B.runSafe("docker rm seed-site seed-daemon seed-proxy grafana prometheus 2>/dev/null");let M=await Hx(B);Y("Running docker compose up...");let P=xb(x,$);try{let O=`${P} docker compose -f ${$.composePath} up -d --pull always --quiet-pull`,E=await B.exec(O);if(E.stderr)L(`compose stderr: ${E.stderr}`)}catch(O){if(S?.stop("docker compose up failed"),L(`docker compose up failed: ${O}`),M.size>0)await u1(M,x,$,B);throw Error(`Deployment failed: ${O}`)}Y("Running post-deploy health checks...");let R=!1;for(let O=0;O<10;O++){if(await new Promise((E)=>setTimeout(E,3000)),R=await n1(B),R)break;Y(`Health check attempt ${O+1}/10...`)}if(!R){if(S?.stop("Health checks failed"),L("Health checks failed \u2014 containers not running after 30s"),M.size>0)await u1(M,x,$,B);throw Error("Deployment failed: containers did not become healthy within 30 seconds")}if(x.compose_sha=z,x.last_script_run=new Date().toISOString(),await t(x,$),S?.stop("Deployment complete!"),L("Deployment complete."),K&&U)f([`Your site is live at ${x.domain}`,"",`  Secret:  ${x.link_secret}`,"","Open the Seed desktop app and enter this secret to link","your publisher account to this site."].join(`
`),"Setup complete")}async function Ox(x,$){let B=`0 2 * * * /usr/bin/bun ${A(x.seedDir,"deploy.js")} >> ${x.deployLog} 2>&1 # seed-deploy`,K=$.runSafe("crontab -l 2>/dev/null")??"";if(K.includes("seed-deploy")){L("Cron job already installed. Skipping.");return}let Y=[K,B,"0 0,4,8,12,16,20 * * * docker image prune -a -f # seed-cleanup"].filter(Boolean).join(`
`)+`
`;try{D1(`echo '${Y}' | crontab -`,{encoding:"utf-8"}),L("Installed nightly deployment cron job (02:00) and image cleanup cron.")}catch(b){L(`Warning: Failed to install cron job: ${b}`)}}async function Ax(){let x=Bx(),$=Kx();if(await $b(x,$),await Sx(x)){L(`Seed deploy v${A1} \u2014 config found at ${x.configPath}, running headless.`);let b=await Yx(x);await i1(b,x,$);return}let K=await Zx($),S;if(K)S=await qx(K,x,$);else S=await zx(x);let Y=await k({message:"Install nightly cron job for automatic updates? (runs at 02:00)",initialValue:!0});if(!y(Y)&&Y)await Ox(x,$),m.success("Cron job installed. Your node will auto-update nightly at 02:00.");await i1(S,x,$),o1("Setup complete! Your Seed node is running.")}if(import.meta.main)Ax().catch((x)=>{console.error("Fatal error:",x),process.exit(1)});export{t as writeConfig,Ix as sha256,Ox as setupCron,Yx as readConfig,Xx as parseWebEnv,Jx as parseImageTag,Qx as parseDaemonEnv,Kx as makeShellRunner,Bx as makePaths,L as log,Vx as getWorkspaceDirs,Hx as getContainerImages,bb as generateSecret,Gx as generateCaddyfile,Wx as extractDns,e1 as environmentPresets,$b as ensureSeedDir,Zx as detectOldInstall,i1 as deploy,Sx as configExists,n1 as checkContainersHealthy,xb as buildComposeEnv,A1 as VERSION,bx as NOTIFY_SERVICE_HOST,$x as LIGHTNING_URL_TESTNET,xx as LIGHTNING_URL_MAINNET,sb as DEFAULT_SEED_DIR,eb as DEFAULT_REPO_URL,s1 as DEFAULT_COMPOSE_URL};
